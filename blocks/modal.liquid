{% doc %}
  Renders a modal dialog component that displays content in an overlay.

  Includes optional trigger button and supports various sizes and close behaviors.

  @example
  {% content_for 'block', type: 'modal', id: 'info-modal' %}
{% enddoc %}

<div {{ block.shopify_attributes }} class="block-modal">
  {% liquid
    assign modal_id = 'modal-' | append: block.id
  %}
  
  {% render 'component-overlays-modal',
    id: modal_id,
    title: block.settings.title,
    content: block.settings.content,
    open: block.settings.open,
    size: block.settings.size,
    close_on_overlay: block.settings.close_on_overlay,
    show_close: block.settings.show_close,
    class: block.settings.class
  %}
  
  {% if block.settings.trigger_text != blank %}
    <button 
      type="button"
      class="ds-button ds-button--{{ block.settings.trigger_variant }}"
      onclick="dsModal.open('{{ modal_id }}')"
    >
      {{ block.settings.trigger_text }}
    </button>
  {% endif %}
</div>

{% schema %}
{
  "name": "Modal",
  "settings": [
    {
      "type": "text",
      "id": "trigger_text",
      "label": "Trigger button text",
      "default": "Open modal",
      "info": "Button to open the modal"
    },
    {
      "type": "select",
      "id": "trigger_variant",
      "label": "Trigger button style",
      "options": [
        {
          "value": "primary",
          "label": "Primary"
        },
        {
          "value": "secondary",
          "label": "Secondary"
        },
        {
          "value": "outline",
          "label": "Outline"
        }
      ],
      "default": "primary"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Modal title"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Modal content",
      "default": "<p>Modal content</p>"
    },
    {
      "type": "checkbox",
      "id": "open",
      "label": "Open by default",
      "default": false
    },
    {
      "type": "select",
      "id": "size",
      "label": "Modal size",
      "options": [
        {
          "value": "sm",
          "label": "Small"
        },
        {
          "value": "md",
          "label": "Medium"
        },
        {
          "value": "lg",
          "label": "Large"
        },
        {
          "value": "xl",
          "label": "Extra Large"
        },
        {
          "value": "full",
          "label": "Full Screen"
        }
      ],
      "default": "md"
    },
    {
      "type": "checkbox",
      "id": "close_on_overlay",
      "label": "Close on overlay click",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_close",
      "label": "Show close button",
      "default": true
    },
    {
      "type": "text",
      "id": "class",
      "label": "Additional CSS classes"
    }
  ],
  "presets": [
    {
      "name": "Modal"
    }
  ]
}
{% endschema %}

