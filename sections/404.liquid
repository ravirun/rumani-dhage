{%- comment -%}
  This section is used in the 404 template to render page shown when customers
  enter an invalid store URL.

  https://shopify.dev/docs/storefronts/themes/architecture/templates/404
{%- endcomment -%}

<section class="page-404" id="shopify-section-{{ section.id }}">
  <div class="page-404__container">
    <div class="page-404__content">
      <div class="page-404__header">
        <h1 class="page-404__title">{{ '404.title' | t }}</h1>
        <p class="page-404__message">{{ '404.not_found' | t }}</p>
        {%- if section.settings.show_description and section.settings.description != blank -%}
          <p class="page-404__description">{{ section.settings.description }}</p>
        {%- endif -%}
      </div>

      {%- if section.settings.show_search -%}
        <div class="page-404__search">
          <form action="{{ routes.search_url }}" method="get" role="search" class="page-404__search-form">
            <label for="404-search-input" class="visually-hidden">{{ 'search.placeholder' | t }}</label>
            <div class="page-404__search-wrapper">
              <input
                type="search"
                id="404-search-input"
                name="q"
                class="page-404__search-input"
                placeholder="{{ 'search.placeholder' | t }}"
                aria-label="{{ 'search.placeholder' | t }}"
                autocomplete="off"
              >
              <button type="submit" class="page-404__search-button" aria-label="{{ 'search.submit' | t }}">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true">
                  <path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16z" stroke="currentColor" stroke-width="2"/>
                  <path d="m19 19-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </button>
            </div>
          </form>
        </div>
      {%- endif -%}

      <div class="page-404__navigation">
        {%- if section.settings.show_home_link -%}
          <a href="{{ routes.root_url }}" class="page-404__link page-404__link--primary">
            {{ '404.back_to_home' | t | default: 'Back to Home' }}
          </a>
        {%- endif -%}
        
        {%- if section.settings.show_products_link -%}
          <a href="{{ routes.all_products_collection_url }}" class="page-404__link">
            {{ '404.back_to_shopping' | t }}
          </a>
        {%- endif -%}
        
        {%- if section.settings.show_collections_link -%}
          <a href="{{ routes.collections_url }}" class="page-404__link">
            {{ '404.view_collections' | t | default: 'View Collections' }}
          </a>
        {%- endif -%}
      </div>

      {%- if section.settings.show_featured_collections and collections.size > 0 -%}
        <div class="page-404__collections">
          <h2 class="page-404__collections-title">{{ '404.featured_collections' | t | default: 'Shop by Category' }}</h2>
          <div class="page-404__collections-grid">
            {%- for collection in collections limit: section.settings.collections_limit -%}
              <a href="{{ collection.url }}" class="page-404__collection-card">
                {%- if collection.featured_image -%}
                  <div class="page-404__collection-image">
                    {%- render 'image',
                      image: collection.featured_image,
                      alt: collection.title,
                      width: 300,
                      height: 300,
                      class: 'page-404__collection-img'
                    -%}
                  </div>
                {%- endif -%}
                <div class="page-404__collection-content">
                  <h3 class="page-404__collection-title">{{ collection.title }}</h3>
                  {%- if collection.description != blank and section.settings.show_collection_description -%}
                    <p class="page-404__collection-description">{{ collection.description | strip_html | truncatewords: 15 }}</p>
                  {%- endif -%}
                </div>
              </a>
            {%- endfor -%}
          </div>
        </div>
      {%- endif -%}
    </div>
  </div>
</section>

{% stylesheet %}
  .page-404 {
    min-height: 60vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-xl) var(--page-margin);
  }

  .page-404__container {
    width: 100%;
    max-width: var(--page-width);
    margin: 0 auto;
  }

  .page-404__content {
    text-align: center;
    max-width: 600px;
    margin: 0 auto;
  }

  .page-404__header {
    margin-bottom: var(--spacing-xl);
  }

  .page-404__title {
    font-size: clamp(3rem, 8vw, 6rem);
    font-weight: calc(var(--font-primary--weight) + 300);
    color: var(--color-foreground);
    margin: 0 0 var(--spacing-md) 0;
    line-height: 1.1;
  }

  .page-404__message {
    font-size: var(--font-size-lg);
    color: color-mix(in srgb, var(--color-foreground) 70%, transparent);
    margin: 0 0 var(--spacing-sm) 0;
  }

  .page-404__description {
    font-size: var(--font-size-base);
    color: color-mix(in srgb, var(--color-foreground) 60%, transparent);
    margin: var(--spacing-md) 0 0 0;
    line-height: 1.6;
  }

  .page-404__search {
    margin: var(--spacing-xl) 0;
  }

  .page-404__search-form {
    max-width: 500px;
    margin: 0 auto;
  }

  .page-404__search-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    background: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--input-border-radius);
    overflow: hidden;
    transition: var(--transition);
  }

  .page-404__search-wrapper:focus-within {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-primary) 20%, transparent);
  }

  .page-404__search-input {
    flex: 1;
    padding: var(--input-padding-vertical) var(--input-padding-horizontal);
    border: none;
    background: transparent;
    font-size: var(--font-size-base);
    font-family: var(--font-primary--family);
    color: var(--color-foreground);
    outline: none;
  }

  .page-404__search-input::placeholder {
    color: color-mix(in srgb, var(--color-foreground) 50%, transparent);
  }

  .page-404__search-button {
    padding: var(--spacing-sm) var(--spacing-md);
    background: transparent;
    border: none;
    color: var(--color-foreground);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
    min-height: 44px;
    min-width: 44px;
  }

  .page-404__search-button:hover {
    color: var(--color-primary);
  }

  .page-404__search-button svg {
    width: 1.25rem;
    height: 1.25rem;
  }

  .page-404__navigation {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-md);
    justify-content: center;
    margin: var(--spacing-xl) 0;
  }

  .page-404__link {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--button-padding);
    border-radius: var(--button-border-radius);
    text-decoration: none;
    font-size: var(--font-size-base);
    font-weight: var(--font-primary--weight);
    transition: var(--transition);
    min-height: 44px;
  }

  .page-404__link--primary {
    background: var(--color-primary);
    color: var(--color-primary-text);
    border: 1px solid var(--color-primary);
  }

  .page-404__link--primary:hover {
    opacity: 0.9;
    transform: translateY(-1px);
  }

  .page-404__link:not(.page-404__link--primary) {
    background: transparent;
    color: var(--color-foreground);
    border: 1px solid var(--color-border);
  }

  .page-404__link:not(.page-404__link--primary):hover {
    background: color-mix(in srgb, var(--color-foreground) 5%, transparent);
    border-color: var(--color-primary);
  }

  .page-404__collections {
    margin-top: var(--spacing-2xl);
    text-align: left;
  }

  .page-404__collections-title {
    font-size: var(--font-size-xl);
    font-weight: var(--font-primary--weight);
    color: var(--color-foreground);
    margin: 0 0 var(--spacing-lg) 0;
    text-align: center;
  }

  .page-404__collections-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: var(--spacing-lg);
  }

  .page-404__collection-card {
    display: flex;
    flex-direction: column;
    text-decoration: none;
    color: inherit;
    background: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--card-border-radius);
    overflow: hidden;
    transition: var(--transition);
  }

  .page-404__collection-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow);
    border-color: var(--color-primary);
  }

  .page-404__collection-image {
    width: 100%;
    aspect-ratio: 1;
    overflow: hidden;
    background: var(--color-secondary);
  }

  .page-404__collection-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .page-404__collection-content {
    padding: var(--spacing-md);
  }

  .page-404__collection-title {
    font-size: var(--font-size-base);
    font-weight: var(--font-primary--weight);
    color: var(--color-foreground);
    margin: 0 0 var(--spacing-xs) 0;
  }

  .page-404__collection-description {
    font-size: var(--font-size-sm);
    color: color-mix(in srgb, var(--color-foreground) 60%, transparent);
    margin: 0;
    line-height: 1.4;
  }

  @media screen and (min-width: 750px) {
    .page-404 {
      min-height: 70vh;
      padding: var(--spacing-2xl) var(--page-margin);
    }

    .page-404__collections-grid {
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:general.404",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "checkbox",
      "id": "show_description",
      "label": "Show custom description",
      "default": false
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "The page you're looking for doesn't exist. Try searching or browse our collections below.",
      "info": "Only shown if 'Show custom description' is enabled"
    },
    {
      "type": "header",
      "content": "Search"
    },
    {
      "type": "checkbox",
      "id": "show_search",
      "label": "Show search form",
      "default": true
    },
    {
      "type": "header",
      "content": "Navigation Links"
    },
    {
      "type": "checkbox",
      "id": "show_home_link",
      "label": "Show home link",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_products_link",
      "label": "Show products link",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_collections_link",
      "label": "Show collections link",
      "default": true
    },
    {
      "type": "header",
      "content": "Featured Collections"
    },
    {
      "type": "checkbox",
      "id": "show_featured_collections",
      "label": "Show featured collections",
      "default": true
    },
    {
      "type": "range",
      "id": "collections_limit",
      "label": "Number of collections",
      "min": 2,
      "max": 8,
      "step": 1,
      "default": 4
    },
    {
      "type": "checkbox",
      "id": "show_collection_description",
      "label": "Show collection descriptions",
      "default": false
    }
  ],
  "presets": [
    {
      "name": "t:general.404"
    }
  ]
}
{% endschema %}
