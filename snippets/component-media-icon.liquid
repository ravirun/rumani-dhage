{% comment %}
  Icon Component
  Renders a graphic symbol to visually communicate core parts of the product and available actions.
  
  @param {string} name - Icon name (Lucide icon) (required)
  @param {string} size - Icon size: xs, sm, md, lg, xl (default: md)
  @param {string} color - Icon color: default, primary, secondary, accent, success, warning, error (default: default)
  @param {boolean} stroke - Use stroke style (default: true)
  @param {string} class - Additional CSS classes
  @param {string} attributes - Additional HTML attributes
  
  @example
  {% render 'component-media-icon', name: 'shopping-cart', size: 'lg', color: 'primary' %}
{% endcomment %}

{% liquid
  assign name = name | default: ''
  assign size = size | default: 'md'
  assign color = color | default: 'default'
  assign stroke = stroke | default: true
  assign class = class | default: ''
  assign attributes = attributes | default: ''
  
  unless name != blank
    echo '<!-- Error: name parameter required for icon component -->'
    break
  endunless
%}

<i 
  data-lucide="{{ name }}"
  class="ds-icon ds-icon--{{ size }} ds-icon--color-{{ color }} {% if stroke %}ds-icon--stroke{% endif %} {{ class }}"
  aria-hidden="true"
  {{ attributes }}
></i>

{% stylesheet %}
  .ds-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  
  .ds-icon--xs {
    width: 0.75rem;
    height: 0.75rem;
  }
  
  .ds-icon--sm {
    width: 1rem;
    height: 1rem;
  }
  
  .ds-icon--md {
    width: 1.5rem;
    height: 1.5rem;
  }
  
  .ds-icon--lg {
    width: 2rem;
    height: 2rem;
  }
  
  .ds-icon--xl {
    width: 2.5rem;
    height: 2.5rem;
  }
  
  .ds-icon--color-default {
    color: var(--color-foreground);
  }
  
  .ds-icon--color-primary {
    color: var(--color-primary);
  }
  
  .ds-icon--color-secondary {
    color: var(--color-secondary-text);
  }
  
  .ds-icon--color-accent {
    color: var(--color-accent);
  }
  
  .ds-icon--color-success {
    color: var(--color-success);
  }
  
  .ds-icon--color-warning {
    color: var(--color-warning);
  }
  
  .ds-icon--color-error {
    color: var(--color-error);
  }
  
  .ds-icon--stroke i {
    stroke-width: 2;
  }
{% endstylesheet %}

{% javascript %}
  (function() {
    // Initialize Lucide icons
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    } else {
      document.addEventListener('DOMContentLoaded', function() {
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      });
    }
  })();
{% endjavascript %}

