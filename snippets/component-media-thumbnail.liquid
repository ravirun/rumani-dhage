{% comment %}
  Thumbnail Component
  Display a small preview image representing content, products, or media.
  
  @param {image} image - Thumbnail image (required)
  @param {string} alt - Alt text (optional)
  @param {string} url - Link URL (optional)
  @param {number} width - Image width (default: 200)
  @param {number} height - Image height (default: 200)
  @param {string} aspect_ratio - Aspect ratio: square, 16:9, 4:3 (default: square)
  @param {string} class - Additional CSS classes
  @param {string} attributes - Additional HTML attributes
  
  @example
  {% render 'component-media-thumbnail', image: product.featured_image, alt: product.title, url: product.url %}
{% endcomment %}

{% liquid
  assign image = image | default: empty
  assign alt = alt | default: ''
  assign url = url | default: ''
  assign width = width | default: 200
  assign height = height | default: 200
  assign aspect_ratio = aspect_ratio | default: 'square'
  assign class = class | default: ''
  assign attributes = attributes | default: ''
  
  unless image != empty
    echo '<!-- Error: image parameter required for thumbnail component -->'
    break
  endunless
  
  unless alt != blank
    assign alt = image.alt | default: 'Thumbnail'
  endunless
%}

{% if url != blank %}
  <a href="{{ url }}" class="ds-thumbnail ds-thumbnail--{{ aspect_ratio }} {{ class }}" {{ attributes }}>
    <img 
      src="{{ image | image_url: width: width, height: height }}"
      alt="{{ alt }}"
      class="ds-thumbnail__image"
      loading="lazy"
      width="{{ width }}"
      height="{{ height }}"
    >
  </a>
{% else %}
  <div class="ds-thumbnail ds-thumbnail--{{ aspect_ratio }} {{ class }}" {{ attributes }}>
    <img 
      src="{{ image | image_url: width: width, height: height }}"
      alt="{{ alt }}"
      class="ds-thumbnail__image"
      loading="lazy"
      width="{{ width }}"
      height="{{ height }}"
    >
  </div>
{% endif %}

{% stylesheet %}
  .ds-thumbnail {
    display: block;
    overflow: hidden;
    border-radius: var(--card-border-radius);
    background-color: var(--color-secondary);
    transition: var(--transition);
  }
  
  .ds-thumbnail:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow);
  }
  
  .ds-thumbnail--square {
    aspect-ratio: 1 / 1;
  }
  
  .ds-thumbnail--16\:9 {
    aspect-ratio: 16 / 9;
  }
  
  .ds-thumbnail--4\:3 {
    aspect-ratio: 4 / 3;
  }
  
  .ds-thumbnail__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }
{% endstylesheet %}

