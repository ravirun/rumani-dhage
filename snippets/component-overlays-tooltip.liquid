{% comment %}
  Tooltip Component
  Displays helpful information in a small overlay when users hover or focus on an element.
  
  @param {string} text - Tooltip text (required)
  @param {string} position - Tooltip position: top, bottom, left, right (default: top)
  @param {string} trigger - Element to attach tooltip to (selector or 'parent') (default: parent)
  @param {string} class - Additional CSS classes
  @param {string} attributes - Additional HTML attributes
  
  @example
  {% render 'component-overlays-tooltip', text: 'Helpful tooltip text', position: 'top' %}
{% endcomment %}

{% liquid
  assign text = text | default: ''
  assign position = position | default: 'top'
  assign trigger = trigger | default: 'parent'
  assign class = class | default: ''
  assign attributes = attributes | default: ''
  
  unless text != blank
    echo '<!-- Error: text parameter required for tooltip component -->'
    break
  endunless
  
  assign tooltip_id = 'tooltip-' | append: 'now' | date: '%s' | append: '-' | append: forloop.index0
%}

<span 
  class="ds-tooltip {{ class }}"
  data-tooltip
  data-tooltip-position="{{ position }}"
  aria-describedby="{{ tooltip_id }}"
  {{ attributes }}
>
  <span class="ds-tooltip__content" id="{{ tooltip_id }}" role="tooltip">
    {{ text }}
  </span>
</span>

{% stylesheet %}
  .ds-tooltip {
    position: relative;
    display: inline-block;
  }
  
  .ds-tooltip__content {
    position: absolute;
    z-index: 1000;
    background-color: var(--color-foreground);
    color: var(--color-background);
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--input-border-radius);
    font-size: var(--font-size-sm);
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transform: translateY(0);
    transition: opacity 0.2s ease, visibility 0.2s ease, transform 0.2s ease;
    pointer-events: none;
  }
  
  .ds-tooltip[data-tooltip-position="top"] .ds-tooltip__content {
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%) translateY(-0.5rem);
    margin-bottom: var(--spacing-xs);
  }
  
  .ds-tooltip[data-tooltip-position="bottom"] .ds-tooltip__content {
    top: 100%;
    left: 50%;
    transform: translateX(-50%) translateY(0.5rem);
    margin-top: var(--spacing-xs);
  }
  
  .ds-tooltip[data-tooltip-position="left"] .ds-tooltip__content {
    right: 100%;
    top: 50%;
    transform: translateX(-0.5rem) translateY(-50%);
    margin-right: var(--spacing-xs);
  }
  
  .ds-tooltip[data-tooltip-position="right"] .ds-tooltip__content {
    left: 100%;
    top: 50%;
    transform: translateX(0.5rem) translateY(-50%);
    margin-left: var(--spacing-xs);
  }
  
  .ds-tooltip:hover .ds-tooltip__content,
  .ds-tooltip:focus .ds-tooltip__content,
  .ds-tooltip:focus-within .ds-tooltip__content {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(0);
  }
  
  .ds-tooltip[data-tooltip-position="left"]:hover .ds-tooltip__content,
  .ds-tooltip[data-tooltip-position="left"]:focus .ds-tooltip__content {
    transform: translateX(0) translateY(-50%);
  }
  
  .ds-tooltip[data-tooltip-position="right"]:hover .ds-tooltip__content,
  .ds-tooltip[data-tooltip-position="right"]:focus .ds-tooltip__content {
    transform: translateX(0) translateY(-50%);
  }
  
  .ds-tooltip[data-tooltip-position="bottom"]:hover .ds-tooltip__content,
  .ds-tooltip[data-tooltip-position="bottom"]:focus .ds-tooltip__content {
    transform: translateX(-50%) translateY(0);
  }
{% endstylesheet %}

