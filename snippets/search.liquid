{% doc %}
  Search Bar Component

  Renders a search input form that submits to Shopify's search page.

  @param {string} placeholder - Placeholder text for the search input (default: 'Search products...')
  @param {string} class - Additional CSS classes for the search wrapper
  @param {boolean} show_category - Show category dropdown (default: false)

  @example
  {% render 'search', placeholder: 'Search products...' %}
{% enddoc %}

{% liquid
  assign placeholder = placeholder | default: 'All Category | Search name color type'
  assign class = class | default: ''
  assign show_category = show_category | default: false
%}

<div class="search-bar {{ class }}">
  <form action="{{ routes.search_url }}" method="get" class="search-bar__form">
    {% if show_category %}
      <select name="type" class="search-bar__category" aria-label="Search category">
        <option value="product">All Category</option>
        <option value="product">Products</option>
        <option value="article">Articles</option>
        <option value="page">Pages</option>
      </select>
    {% endif %}
    
    <div class="search-bar__input-wrapper">
      <input
        type="search"
        name="q"
        class="search-bar__input"
        placeholder="{{ placeholder }}"
        aria-label="Search"
        autocomplete="off"
      >
      <button type="submit" class="search-bar__button" aria-label="Search">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="m19 19-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
  </form>
</div>

{% stylesheet %}
  .search-bar {
    position: relative;
    width: 100%;
    max-width: 600px;
  }

  .search-bar__form {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    width: 100%;
  }

  .search-bar__category {
    padding: 0.75rem 1rem;
    border: 1px solid var(--color-foreground, #333);
    border-radius: var(--style-border-radius-inputs, 4px);
    background-color: var(--color-background, #fff);
    color: var(--color-foreground, #333);
    font-size: 0.875rem;
    cursor: pointer;
  }

  .search-bar__input-wrapper {
    position: relative;
    flex: 1;
    display: flex;
    align-items: center;
  }

  .search-bar__input {
    width: 100%;
    padding: 0.75rem 3rem 0.75rem 1rem;
    border: 1px solid var(--color-foreground, #333);
    border-radius: var(--style-border-radius-inputs, 4px);
    background-color: var(--color-background, #fff);
    color: var(--color-foreground, #333);
    font-size: 0.875rem;
    outline: none;
    transition: border-color 0.2s ease;
  }

  .search-bar__input:focus {
    border-color: var(--color-foreground, #333);
    box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
  }

  .search-bar__input::placeholder {
    color: rgba(0, 0, 0, 0.5);
  }

  .search-bar__button {
    position: absolute;
    right: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    padding: 0;
    border: none;
    border-radius: var(--style-border-radius-inputs, 4px);
    background-color: var(--color-foreground, #333);
    color: var(--color-background, #fff);
    cursor: pointer;
    transition: background-color 0.2s ease;
  }

  .search-bar__button:hover {
    background-color: rgba(0, 0, 0, 0.8);
  }

  .search-bar__button:active {
    transform: scale(0.95);
  }

  .search-bar__button svg {
    width: 1.25rem;
    height: 1.25rem;
  }
{% endstylesheet %}

